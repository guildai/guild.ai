<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>Operations - Guild AI</title>
    <link href="../../assets/css/vendor.min.css" rel="stylesheet">
    <link href="../../assets/css/theDocs.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab|Roboto|Roboto+Mono" rel="stylesheet">
    <link rel="icon" href="../../assets/img/favicon.png">
  </head>
  <body>
    
    



<div class="search-modal modal fade" id="search-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title" id="exampleModalLabel">Search</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <div class="input-wrapper">
            <span class="fa fa-search fa-lg" aria-hidden="true"></span>
            <input
              type="text"
              id="search-input"
              class="form-control initial-focus"
              placeholder="Find something">
          </div>
        </div>
        <ul id="search-results"></ul>
      </div>
      <div class="modal-footer">
        <ul class="pagination" id="search-pages"></ul>
        <div class="algolia-link">
          <a href="https://www.algolia.com/" target="_blank">
            <img src="../../assets/img/search-by-algolia.svg">
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


<header class="site-header sticky">
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../">
          <img src="../../assets/img/logo_nav.svg" alt="logo">
        </a>
      </div>
      <div class="spacer"></div>
      <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
        
        <ul class="nav navbar-nav navbar-right">
  
  
  
  
  
  
  <li class="">
    <a href="/install/">Install</a>
  </li>
  
  
  
  
  <li class="active">
    <a href="/docs/">Documentation</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/models/">Models</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/support/">Support</a>
  </li>
  
  
  
  
  
  
  
  <li class="">
    <a href="/about/">About</a>
  </li>
  
  
</ul>
      </div>
      <div class="search-header">
  <button type="button" class="btn btn-search" data-toggle="modal" data-target="#search-modal">
    <span class="fa fa-search fa-lg" aria-hidden="true"></span>
  </button>
</div>
    </div>
  </nav>
  
</header>

    
<main class="container">
  <div class="row">
    <aside class="col-sm-3 sidebar">

  <div class="sidebar-nav">
    <div>
      <button type="button" class="sidebar-close" data-toggle="offcanvas">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
      </button>
      <a class="sidebar-nav-brand" href="None">
        <img src="../../assets/img/logo_nav.svg" alt="logo">
      </a>
    </div>
    <ul class="nav ">
  
  
  
  
  
  
  <li class="">
    <a href="/install/">Install</a>
  </li>
  
  
  
  
  <li class="active">
    <a href="/docs/">Documentation</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/models/">Models</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/support/">Support</a>
  </li>
  
  
  
  
  
  
  
  <li class="">
    <a href="/about/">About</a>
  </li>
  
  
</ul>
    <ul class="social-icons">
  
  <li><a href="https://github.com/guildai" target="_blank"><i class="fa fa-github"></i></a></li>
  
  <li><a href="https://twitter.com/guild_ai" target="_blank"><i class="fa fa-twitter"></i></a></li>
  
</ul>
  </div>

  
  
  
  
  
  
  
  <ul class="sidenav dropable sticky_disabled">
    
    
    
    
    <li>
      <a
        class=""
        href="/docs/overview/">Overview</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/models/">Models</a>
    </li>
    
    
    
    <li>
      <a
        class="active"
        href="/docs/operations/">Operations</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/runs/">Runs</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/resources/">Resources</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/packages/">Packages</a>
    </li>
    
    
    
    <li>
      <a class="" href="#">Visualization</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/visual/guild-view/">Guild View</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/visual/tensorboard/">TensorBoard</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Commands</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/commands/">Overview</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/check-cmd/">check</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/compare-cmd/">compare</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/help-cmd/">help</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/index-cmd/">index</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/init-cmd/">init</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/install-cmd/">install</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/label-cmd/">label</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/models-cmd/">models</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/operations-cmd/">operations</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/package-cmd/">package</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-cmd/">packages</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-delete-cmd/">packages delete</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-info-cmd/">packages info</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-list-cmd/">packages list</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/resources-cmd/">resources</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/run-cmd/">run</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-cmd/">runs</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-delete-cmd/">runs delete</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-info-cmd/">runs info</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-label-cmd/">runs label</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-list-cmd/">runs list</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-purge-cmd/">runs purge</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-restore-cmd/">runs restore</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-stop-cmd/">stop</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/search-cmd/">search</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/shell-cmd/">shell</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/stop-cmd/">stop</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/sync-cmd/">sync</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorboard-cmd/">tensorboard</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorflow-cmd/">tensorflow</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorflow-inspect-cmd/">tensorflow inspect</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/train-cmd/">train</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/uninstall-cmd/">uninstall</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/view-cmd/">view</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Reference</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/reference/guild-file/">Guild file</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/reference/guild-home/">Guild home</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Tutorials</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/tutorials/">Overview</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/tutorials/train-mnist/">Go deeper with Guild AI</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/tutorials/train-and-predict-with-cloudml/">Train and predict with Cloud ML</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/tutorials/develop-a-model-from-scratch/">Develop a model from scratch</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/tutorials/workflow-with-virtualenv/">Workflow with Virtualenv</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/troubleshooting/">Troubleshooting</a>
    </li>
    
    
  </ul>
  
  
  
  
  
  
  
  
  
  
  
</aside>
    <article
      class="col-sm-9 main-content"
      role="main">
      <h1 id="operations">Operations</h1>
<ol class="toc">
<li><a href="#run-an-operation">Run an operation</a><ol class="md">
<li><a href="#operation-aliases">Operation aliases</a></li>
</ol>
</li>
<li><a href="#get-operation-help">Get operation help</a></li>
<li><a href="#list-operations">List operations</a></li>
<li><a href="#flags">Flags</a></li>
<li><a href="#required-resources">Required resources</a></li>
<li><a href="#implementing-an-operation">Implementing an operation</a></li>
</ol>
<p>An operation is an action performed on a <a class="term" href="../../docs/models/">model</a>. When run, an
operation generates a <a class="term" href="../../docs/runs/">run</a>, which is persistent record of the
operation.</p>
<p>Examples of model operations include:</p>
<table class="table dl">
<tr><td class="dt"><code>train</code></td>
<td class="dd">Train a model</td>
</tr><tr><td class="dt"><code>evaluate</code></td>
<td class="dd">Evaluate a trained model</td>
</tr><tr><td class="dt"><code>finetune</code></td>
<td class="dd">Fine tune a pretrained model</td>
</tr><tr><td class="dt"><code>prepare</code></td>
<td class="dd">Prepare a dataset for use in training</td>
</tr><tr><td class="dt"><code>generate</code></td>
<td class="dd">Use a model to generate content</td>
</tr></table>
<p>While these operations are commonly used, model developers are free to
define different operations as needed. For example, if a model
supports compression (e.g. by using quantization), it might define a
<code>compress</code> operation.</p>
<h2 id="run-an-operation">Run an operation</h2>
<p>To run an operation, use the <a class="cmd" href="../../docs/commands/run-cmd">run</a> command:</p>
<pre><code class="language-command">guild run OPERATION [ARG...]
</code></pre>

<p><code>OPERATION</code> must include the complete operation name and may also
include package and model information to disambiguate the operation.</p>
<p>To specify the model along with the operation name, use
<code>MODEL:OPERATION</code>. For example, to run the <code>prepare</code> operation on a
model named <code>iris-dataset</code>, you would run:</p>
<pre><code class="language-command">guild run iris-dataset:prepare
</code></pre>

<p>For more information, see the <a class="cmd" href="../../docs/commands/run-cmd">run</a> command.</p>
<h3 id="operation-aliases">Operation aliases</h3>
<p>Some operations are so common that Guild provides
<a class="term" href="../../docs/runs/#operation-aliases">aliases</a> for them. Aliases let you run commands
this way:</p>
<pre><code class="language-command">guild OPERATION_ALIAS [MODEL] [ARG...]
</code></pre>

<p>The following operation aliases are supported:</p>
<ul class="md">
<li><a class="cmd" href="../../docs/commands/train-cmd">train</a></li>
</ul>
<p>For example, to run the <code>train</code> operation on a model, use:</p>
<pre><code class="language-command">guild train MODEL
</code></pre>

<p>This command is equivalent to running:</p>
<pre><code class="language-command">guild run MODEL:train
</code></pre>

<h2 id="get-operation-help">Get operation help</h2>
<p>Operation help is displayed for model help when run <code class="lit">guild
help</code>. See <a href="../../docs/models/#get-model-help">Get model help</a> and the
<a class="cmd" href="../../docs/commands/help-cmd">help</a> command for more information on general model help.</p>
<p>You can get help for a specific operation using the <code class="lit">--help-op</code>
option with the <code>run</code> command (or an operation alias).</p>
<p>Operation help includes the list of flags you can specify for an
operation. This is useful when you have started to type a run command
and want help on available or required flags.</p>
<p>For example, to view operation help for the <code>train</code> operation, run:</p>
<pre><code class="language-command">guild train --help-op
</code></pre>

<h2 id="list-operations">List operations</h2>
<p>To list available operations, run:</p>
<pre><code class="language-command">guild operations
</code></pre>

<p>For more information, see the <a class="cmd" href="../../docs/commands/operations-cmd">operations</a> command.</p>
<h2 id="flags">Flags</h2>
<p>Flags are operation parameters and are used to specify the behavior of
an operation for a run.</p>
<p>Flags are defined by the model operation. For more information on flag
definitions, see <a href="../../docs/reference/guild-file/#flags">Flags</a> in the
Guild file reference.</p>
<p>Flag values are specified using <code>NAME=VALUE</code> arguments to the
<a class="cmd" href="../../docs/commands/run-cmd">run</a> command (or operation alias).</p>
<p>For example, consider the operation help for
<code>keras.mnist/mnist-mlp:train</code>, which we can show by running:</p>
<pre><code class="language-command">guild run mlp:train --help-op
</code></pre>

<pre><code class="language-output">Usage: guild run [OPTIONS] mnist-mlp:train [FLAG]...

Train the MLP

Use 'guild run --help' for a list of options.

Flags:
  batch-size  Training batch size (default is 128)
  epochs      Number of epochs to train (default is 20)
</code></pre>

<p>As described in the operation help, <code>mnist-mlp:train</code> supports two
flags: <code>batch-size</code> and <code>epochs</code>. If we wanted to train the model over
<code>10</code> epochs using a batch size of <code>64</code>, we would use:</p>
<pre><code class="language-command">guild train batch-size=64 epochs=10
</code></pre>

<h2 id="required-resources">Required resources</h2>
<p>Operations may require <a class="term" href="../../docs/resources/">resources</a>. Required resources
are listed in the operation&rsquo;s <code>requires</code> attribute.</p>
<p>When Guild starts an operation, it first resolves each required
resource. If a resource cannot be resolved, the operation fails with
an error message.</p>
<p>Resources are resolved by acquiring them (e.g. download a file from
the Internet), verifying them, and finally creating links to resources
files in the run directory. In this way, operations can easily express
&ldquo;I need these files to run&rdquo; and ensure that the correct files are
available for each run.</p>
<p>In most cases resources are automatically resolved, but in some cases
an operation may require that the user specify a resource. Resources
can be specified the same way flag values are specified &mdash; using
<code>NAME=VALUE</code>. In the case of a resource, <code>VALUE</code> is the name of the
required resource.</p>
<p>Required resources are described in operation help, if applicable.</p>
<h2 id="implementing-an-operation">Implementing an operation</h2>
<p>Operations are implemented in Python modules. If <code>main</code> is specified,
the module must execute when loaded, and should use this pattern:</p>
<pre><code class="language-python">def main():
    &quot;Operation code here.&quot;

if __name__ == &quot;__main__&quot;:
    main()
</code></pre>

<p>Operations are executed in the context of the current run directory.</p>
<div id="environment-variables"></div>

<p>Operations have access to a number of environment variables.</p>
<table class="table dl">
<tr><td class="dt"><code>CMD_DIR</code></td>
<td class="dd">Path where the operation was run. This is the original working
  directory that was changed to <code>RUN_DIR</code> for the operation.</td>
</tr><tr><td class="dt"><code>GUILD_HOME</code></td>
<td class="dd">Guild install location.</td>
</tr><tr><td class="dt"><code>GUILD_OP</code></td>
<td class="dd">Name of the operation including the model.</td>
</tr><tr><td class="dt"><code>GUILD_PLUGINS</code></td>
<td class="dd">Comma separated list of active Guild plugins.</td>
</tr><tr><td class="dt"><code>LOG_LEVEL</code></td>
<td class="dd">Python log level active for the run.</td>
</tr><tr><td class="dt"><code>MODEL_DIR</code></td>
<td class="dd">The directory containing the operation model definition. This is
  where the Guild file is located and can be used to reference
  relative files.</td>
</tr><tr><td class="dt"><code>RUN_DIR</code></td>
<td class="dd">Active run directory path. This is the working directory during an
  operation. See <code>CMD_DIR</code> for the original working directory -
  i.e. where the operation was run from.</td>
</tr><tr><td class="dt"><code>RUN_ID</code></td>
<td class="dd">Active run ID.</td>
</tr></table>
      
<ul class="pager">
  
  <li class="previous">
    <a href="/docs/models/">
      <span>Prev</span> <aside>Models</aside>
    </a>
  </li>
  
  
  <li class="next">
    <a href="/docs/runs/">
      <span>Next</span> <aside>Runs</aside>
    </a>
  </li>
  
</ul>

    </article>
  </div>
</main>

    
<footer class="site-footer">
  <div class="container">
    <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>
    <div class="row">
      <div class="col-md-6 col-sm-6 footer-cell">
        <div class="copyright">Copyright &copy; 2017-2018 TensorHub, Inc.</div>
        
      </div>
      <div class="col-md-6 col-sm-6 footer-cell">
        <ul class="footer-menu">
          <li><a href="mailto:niceperson@guild.ai">Contact us</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

  </body>
  <script src="../../assets/js/vendor.min.js" data-manual></script>
  <script src="../../assets/js/theDocs.min.js"></script>
</html>