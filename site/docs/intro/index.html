<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>Introduction - Guild AI</title>
    <link href="../../assets/css/vendor.min.css" rel="stylesheet">
    <link href="../../assets/css/theDocs.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab|Roboto|Roboto+Mono" rel="stylesheet">
    <link rel="icon" href="../../assets/img/favicon.png">
  </head>
  <body>
    
    



<div class="search-modal modal fade" id="search-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title" id="exampleModalLabel">Search</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <div class="input-wrapper">
            <span class="fa fa-search fa-lg" aria-hidden="true"></span>
            <input
              type="text"
              id="search-input"
              class="form-control initial-focus"
              placeholder="Find something">
          </div>
        </div>
        <ul id="search-results"></ul>
      </div>
      <div class="modal-footer">
        <ul class="pagination" id="search-pages"></ul>
        <div class="algolia-link">
          <a href="https://www.algolia.com/" target="_blank">
            <img src="../../assets/img/search-by-algolia.svg">
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


<header class="site-header sticky">
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../">
          <img src="../../assets/img/logo_nav.svg" alt="logo">
        </a>
      </div>
      <div class="spacer"></div>
      <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
        
        <ul class="nav navbar-nav navbar-right">
  
  
  
  
  
  
  <li class="">
    <a href="/install/">Install</a>
  </li>
  
  
  
  
  <li class="active">
    <a href="/docs/">Documentation</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/packages/">Packages</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/support/">Support</a>
  </li>
  
  
  
  
  
  
  
  <li class="">
    <a href="/about/">About</a>
  </li>
  
  
</ul>
      </div>
      <div class="search-header">
  <button type="button" class="btn btn-search" data-toggle="modal" data-target="#search-modal">
    <span class="fa fa-search fa-lg" aria-hidden="true"></span>
  </button>
</div>
    </div>
  </nav>
  
</header>

    
<main class="container">
  <div class="row">
    <aside class="col-sm-3 sidebar">

  <div class="sidebar-nav">
    <div>
      <button type="button" class="sidebar-close" data-toggle="offcanvas">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
      </button>
      <a class="sidebar-nav-brand" href="None">
        <img src="../../assets/img/logo_nav.svg" alt="logo">
      </a>
    </div>
    <ul class="nav ">
  
  
  
  
  
  
  <li class="">
    <a href="/install/">Install</a>
  </li>
  
  
  
  
  <li class="active">
    <a href="/docs/">Documentation</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/packages/">Packages</a>
  </li>
  
  
  
  
  <li class="">
    <a href="/support/">Support</a>
  </li>
  
  
  
  
  
  
  
  <li class="">
    <a href="/about/">About</a>
  </li>
  
  
</ul>
    <ul class="social-icons">
  
  <li><a href="https://github.com/guildai" target="_blank"><i class="fa fa-github"></i></a></li>
  
  <li><a href="https://twitter.com/guild_ai" target="_blank"><i class="fa fa-twitter"></i></a></li>
  
</ul>
  </div>

  
  
  
  
  
  
  
  <ul class="sidenav dropable sticky_disabled">
    
    
    
    
    <li>
      <a
        class="active"
        href="/docs/intro/">Introduction</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/models/">Models</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/operations/">Operations</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/runs/">Runs</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/resources/">Resources</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/packages/">Packages</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/tests/">Tests</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/environments/">Environments</a>
    </li>
    
    
    
    <li>
      <a
        class=""
        href="/docs/remotes/">Remotes</a>
    </li>
    
    
    
    <li>
      <a class="" href="#">Visualization</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/visual/guild-view/">Guild View</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/visual/tensorboard/">TensorBoard</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Commands</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/commands/">Overview</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/cat-cmd/">cat</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/check-cmd/">check</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/compare-cmd/">compare</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/diff-cmd/">diff</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/download-cmd/">download</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/export-cmd/">export</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/help-cmd/">help</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/import-cmd/">import</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/index-cmd/">index</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/init-cmd/">init</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/install-cmd/">install</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/label-cmd/">label</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/ls-cmd/">ls</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/models-cmd/">models</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/new-cmd/">new</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/open-cmd/">open</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/operations-cmd/">operations</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/package-cmd/">package</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-cmd/">packages</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-delete-cmd/">packages delete</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-info-cmd/">packages info</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/packages-list-cmd/">packages list</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/pull-cmd/">pull</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/push-cmd/">push</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/remote-cmd/">remote</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/remote-start-cmd/">remote start</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/remote-status-cmd/">remote status</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/remote-stop-cmd/">remote stop</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/remotes-cmd/">remotes</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/run-cmd/">run</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-cmd/">runs</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-delete-cmd/">runs delete</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-diff-cmd/">runs diff</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-export-cmd/">runs export</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-import-cmd/">runs import</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-info-cmd/">runs info</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-label-cmd/">runs label</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-list-cmd/">runs list</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-pull-cmd/">runs pull</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-purge-cmd/">runs purge</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-push-cmd/">runs push</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-restore-cmd/">runs restore</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/runs-stop-cmd/">stop</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/search-cmd/">search</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/shell-cmd/">shell</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/stop-cmd/">stop</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/sync-cmd/">sync</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorboard-cmd/">tensorboard</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorflow-cmd/">tensorflow</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/tensorflow-inspect-cmd/">tensorflow inspect</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/test-cmd/">test</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/uninstall-cmd/">uninstall</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/view-cmd/">view</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/commands/watch-cmd/">watch</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Reference</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/reference/guild-file/">Guild file</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/reference/guild-home/">Guild home</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/reference/user-config/">User configuration</a>
        </li>
        
        
      </ul>
    </li>
    
    
    
    <li>
      <a class="" href="#">Guides</a>
      <ul>
        
        
        <li>
          <a
            class=""
            href="/docs/guides/">Overview</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/create-a-project/">Create a Guild project</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/convert-jupyter/">Convert a Jupyter Notebook</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/create-an-image-classifier/">Create an image classifier</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/train-on-ec2/">Train on EC2</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/backup-to-s3/">Backup to S3</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/compare-runs/">Compare runs</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/publish-to-pypi/">Publish to PyPI</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/debug-an-operation/">Debug an operation</a>
        </li>
        
        
        
        <li>
          <a
            class=""
            href="/docs/guides/specify-run-gpus/">Specify available GPUs</a>
        </li>
        
        
      </ul>
    </li>
    
    
  </ul>
  
  
  
  
  
  
  
  
  
  
  
</aside>
    <article
      class="col-sm-9 main-content"
      role="main">
      <h1 id="guild-ai-introduction">Guild AI introduction</h1>
<ol class="toc">
<li><a href="#projects">Projects</a><ol class="md">
<li><a href="#example">Example</a></li>
</ol>
</li>
<li><a href="#model-operations">Model operations</a><ol class="md">
<li><a href="#example_1">Example</a></li>
</ol>
</li>
<li><a href="#experiments">Experiments</a><ol class="md">
<li><a href="#example_2">Example</a></li>
</ol>
</li>
<li><a href="#end-to-end-workflow">End-to-end workflow</a><ol class="md">
<li><a href="#example_3">Example</a></li>
</ol>
</li>
<li><a href="#model-tests">Model tests</a><ol class="md">
<li><a href="#example_4">Example</a></li>
</ol>
</li>
<li><a href="#packages-and-code-reuse">Packages and code reuse</a><ol class="md">
<li><a href="#example_5">Example</a></li>
</ol>
</li>
<li><a href="#summary">Summary</a><ol class="md">
<li><a href="#next-steps">Next steps</a></li>
</ol>
</li>
</ol>
<p>This introduction provides an overview of Guild AI core
functionality. Follow the steps under the each <strong>Example</strong> section
below to get hands-on experience with Guild. By following the
examples, you will implement a Keras image classifier as described in
TensorFlow&rsquo;s <em><a class="ext" href="https://www.tensorflow.org/tutorials/keras/basic_classification" target="_blank">Train your first neural network: basic classification</a></em>.</p>
<p>Refer to the <a href="https://github.com/guildai/examples/tree/master/fashion">completed
project</a> for
the full example.</p>
<figure><p><img alt="Fashion-MNIST" class="md" src="../../assets/img/fashion-mnist.png" /></p>
<figcaption>Fashion-MNIST dataset used in examples below</figcaption>
</figure><h2 id="projects">Projects</h2>
<p>Guild features are be enabled for a TensorFlow or Keras project by
adding a file named <code>guild.yml</code> to the project root directory. We
refer to <code>guild.yml</code> as a project <a class="term" href="../../docs/reference/guild-file/">Guild file</a>.</p>
<p>Guild files supplement TensorFlow and Keras projects. You often don&rsquo;t
need to modify your project source files to take advantage of Guild
features.</p>
<p>Guild files are YAML formatted files that define <a class="term" href="../../docs/models/">models</a>,
model <a class="term" href="../../docs/operations/">operations</a>, model <a class="term" href="../../docs/resources/">resources</a>,
<a class="term" href="../../docs/tests/">tests</a>, and <a class="term" href="../../docs/packages/">packages</a>.</p>
<h3 id="example">Example</h3>
<p>In this example, we create a Guild project that contains a basic model
definition.</p>
<p>If you haven&rsquo;t already done so, <a href="../../install/">install Guild AI</a>.</p>
<p>To create a project, start by creating its directory:</p>
<pre><code class="language-command">mkdir sample-project
</code></pre>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In any command example, you can click the word <strong><code>COMMAND</code></strong> in the
upper right corner to copy the example text to your clipboard, which
you can paste into your console.</p>
</div>
<p>Create the file <code class="lit">sample-project/guild.yml</code> and modify it to be:</p>
<pre><code class="language-yaml">- model: fashion
  description: Basic Fashion-MNIST image classifier.
</code></pre>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As with command examples, you can click the word <strong><code>YAML</code></strong> to copy
the example to your clipboard, which you can paste into your text
editor.</p>
</div>
<p>Save your changes to <code class="lit">guild.yml</code>.</p>
<p>Confirm that the project structure is:</p>
<div class="file-tree">
<ul>
<li class="is-folder open">sample-project
 <ul>
 <li class="is-file">guild.yml</li>
 </ul>
</li>
</ul>
</div>

<p>Change to the project directory and use Guild to list the project
models:</p>
<pre><code class="language-command">cd sample-project
guild models
</code></pre>

<p>Guild shows the project models:</p>
<pre><code class="language-output">./fashion  Basic Fashion-MNIST image classifier.
</code></pre>

<p>The value <code class="lit">./fashion</code> is the model source and name. The source
<code class="lit">./</code> means that the model is defined in the current directory. Both
the model name and description come from the Guild file you just
created.</p>
<p>Guild model definitions represent the TensorFlow or Keras models in
your project. In the examples that follow, we fill in details to
create a fully functional classifier for the Fashion-MNIST dataset.</p>
<h2 id="model-operations">Model operations</h2>
<p>Model operations automate model related tasks. A common operation is
<em>train</em>, which trains a model from scratch. As we&rsquo;ll see later in this
introduction, operations can be any task that you want to
automate. These may include:</p>
<div class="dl">
<div class="row"><div class="dt col col-sm-4 col-lg-3"><em>prepare-data</em></div>
<div class="dd col col-sm-8 col-lg-9">Prepare a dataset for training.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>transfer-learn</em></div>
<div class="dd col col-sm-8 col-lg-9">Train a model using transfer learning.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>finetune</em></div>
<div class="dd col col-sm-8 col-lg-9">Fine tune a trained model.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>evaluate</em></div>
<div class="dd col col-sm-8 col-lg-9">Evaluate a trained model on a test/validation dataset.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>quantize</em></div>
<div class="dd col col-sm-8 col-lg-9">Quantize a trained model to use 8 bit integers.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>predict</em></div>
<div class="dd col col-sm-8 col-lg-9">Use a trained model to make predictions.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><em>serve</em></div>
<div class="dd col col-sm-8 col-lg-9">Run a trained model as an inference server.</div>
</div></div>
<p>You&rsquo;re free to define the operations that suit your model&mdash;Guild does
not prescribe a set of operations that must be supported.</p>
<p>You run an operation using the <a class="cmd" href="../../docs/commands/run-cmd">run</a> command. As we&rsquo;ll see in
the next section, each operation run is tracked as a separate
experiment.</p>
<h3 id="example_1">Example</h3>
<p>If you are following the examples, in this section we add a <code class="lit">train</code>
operation to our model and run that operation as an experiment.</p>
<p>Modify <code class="lit">guild.yml</code> to be:</p>
<pre><code class="language-yaml">- model: fashion
  description: Basic Fashion-MNIST image classifier.
  operations:
    train:
      description: Train classifier from scratch.
      main: train
</code></pre>

<p>This change adds a <code>train</code> operation to the model with a description
and a main module.</p>
<p>Save your changes to <code class="lit">guild.yml</code>.</p>
<p>Use the <a class="cmd" href="../../docs/commands/operations-cmd">operations</a> command to list available operations:</p>
<pre><code class="language-command">guild operations
</code></pre>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <code>ops</code> as a short cut to the <code>operations</code> command. We use
<code>ops</code> through the rest of this introduction.</p>
</div>
<p>Guild displays the newly added <code>train</code> operation:</p>
<pre><code class="language-output">./fashion:train  Train classifier from scratch.
</code></pre>

<p>The value <code class="lit">./fashion:train</code> is the full operation name, which
contains the model as well as the operation name.</p>
<p>You can view help for the project using the <a class="cmd" href="../../docs/commands/help-cmd">help</a> command:</p>
<pre><code class="language-command">guild help
</code></pre>

<p>Guild automatically generates help from the Guild file. This
information is useful for working with the project, especially as it
becomes more complex over time.</p>
<p>Press <code class="lit">q</code> to exit the help screen.</p>
<p>Next, run the operation:</p>
<pre><code class="language-command">guild run train
</code></pre>

<p>Press <code>Enter</code> to confirm the operation.</p>
<p>The command fails with the message:</p>
<pre><code class="language-error">guild: No module named train
</code></pre>

<p>This is okay&mdash;we expect this error because our project is missing the
<code>train</code> module.</p>
<p>Guild operations are implemented using Python main
modules&mdash;i.e. Python modules that can be executed as a program (see
<a class="ext" href="https://docs.python.org/3/using/cmdline.html#cmdoption-m" target="_blank">Python help</a> for
details). Any Python script can therefore be used for a Guild model
operation.</p>
<p>Let&rsquo;s create the missing module.</p>
<p>Download <a class="ext" href="https://raw.githubusercontent.com/guildai/examples/master/fashion/train.py" target="_blank">train.py</a>
and save it to the project directory. If you have <code>wget</code> installed,
you can download the file directly to the project directory by
running:</p>
<pre><code class="language-command">wget https://raw.githubusercontent.com/guildai/examples/master/fashion/train.py
</code></pre>

<p>Confirm that the project structure is now:</p>
<div class="file-tree">
<ul>
<li class="is-folder open">sample-project
 <ul>
 <li class="is-file">guild.yml</li>
 <li class="is-file">train.py</li>
 </ul>
</li>
</ul>
</div>

<p>The <code>train</code> module uses Keras to train a simple image classifer. The
module is derived from the <a class="ext" href="https://github.com/tensorflow/docs/blob/master/site/en/tutorials/keras/basic_classification.ipynb" target="_blank">TensorFlow getting started tutorial
Notebook</a>. The
neural network used in <code>train</code> consists of three layers:</p>
<ul class="md">
<li>Input layer used to read images</li>
<li>Fully connected hidden layer</li>
<li>Fully connected output layer used generate image classes</li>
</ul>
<p>For details on the network architecture, see <a class="ext" href="https://www.tensorflow.org/tutorials/keras/basic_classification#build_the_model" target="_blank">Build the model</a>
in the TensorFlow basic classification example.</p>
<p>Before we can train our model, we need to install the following Python
packages, which are required by the <code>train</code> module:</p>
<ul class="md">
<li>matplotlib</li>
<li>h5py</li>
<li>numpy</li>
</ul>
<p>Install those packages using pip:</p>
<pre><code class="language-command">pip install matplotlib h5py numpy
</code></pre>

<p>With the <code class="lit">train</code> module now available, run the operation again:</p>
<pre><code class="language-command">guild run train
</code></pre>

<p>Press <code>Enter</code> to confirm the operation.</p>
<p>Guild runs the train operation by executing the <code class="lit">train</code> module as a
program&mdash;the operation is implemented entirely by that module.</p>
<p>The operation run was captured as an <em>experiment</em>. We examine
experiments next.</p>
<h2 id="experiments">Experiments</h2>
<p>Guild tracks each operation run as an isolated experiment that can be
managed and used. Files generated by a run are written to their
associated <a class="term" href="../../docs/runs/#run-directory">run directory</a> and can be accessed as normal
files. Guild saves operation metadata, process output, and process
exit status for each run.</p>
<p>Guild provides extensive support for managing and using runs:</p>
<ul class="md">
<li>View metadata, files, and output</li>
<li>List by operation, status, and label</li>
<li>Delete, restore, and purge</li>
<li>Export and import</li>
<li>Tag with custom labels</li>
<li>Copy to and from remote environments</li>
<li>Compare run performance</li>
<li>Diff run metadata, files, and output</li>
</ul>
<p>Files generated by a run can be used as input to other runs. For
example, model checkpoints saved during a <em>train</em> operation can be
used as input to an <em>evaluate</em> operation.</p>
<p>For information on managing runs, see <a href="../../docs/runs/">Runs</a>.</p>
<h3 id="example_2">Example</h3>
<p>If you are following the examples, in this section we use Guild&rsquo;s run
management facility to examine the runs generated in the previous
example.</p>
<p>First, list available runs:</p>
<pre><code class="language-command">guild runs
</code></pre>

<p>Guild shows the two runs from the previous section (dates and IDs will
differ):</p>
<pre><code class="language-output">[1:19c67a72]  ./fashion:train  2018-10-16 15:57:32  completed
[2:1451e20c]  ./fashion:train  2018-10-16 15:57:23  error
</code></pre>

<p>The latest run is listed first and should have a status of
<strong>completed</strong>, indicating that the operation exited without an
error. The previous run is listed second and should have a status of
<strong>error</strong> because the <code>train</code> module was not originally available (see
previous section).</p>
<p>Next, show output for the failed run:</p>
<pre><code class="language-command">guild runs info --output 2
</code></pre>

<p>The option <code class="lit">--output</code> tells Guild to include run output. The value
<code class="lit">2</code> tells Guild to show information for the run with index <code>2</code> (see
listing above).</p>
<p>Guild shows information for the failed run (dates and IDs will
differ):</p>
<pre><code class="language-output">id: 1451e20cd18611e88f52d017c2ab916f
operation: ./fashion:train
status: error
started: 2018-10-16 15:57:23
stopped: 2018-10-16 15:57:23
run_dir: ~/.guild/runs/1451e20cd18611e88f52d017c2ab916f
command: /usr/bin/python -um guild.op_main train
exit_status: 1
pid:
output:
  guild: No module named train
</code></pre>

<p>Note the error message in the output. This information is retained as
a part of the tracked experiment.</p>
<p>Next, delete the failed run (we don&rsquo;t need it):</p>
<pre><code class="language-command">guild runs rm 2
</code></pre>

<p>As with the <code>runs info</code> command, the value <code class="lit">2</code> is a reference to the
second run in the list.</p>
<p>Guild prompts you before deleting the run. Press <code>Enter</code> to
confirm. After deleting the run, you can verify that it was deleted by
running <code class="lit">guild runs</code>.</p>
<p>If you make a mistake and delete a run by accident, you can restore it
using <a class="cmd" href="../../docs/commands/runs-restore-cmd">runs restore</a>.</p>
<p>Next, view the files generated by the successful run:</p>
<pre><code class="language-command">guild ls
</code></pre>

<p>We can omit a reference to the run in this case&mdash;Guild assumes you
want to show files for the latest run.</p>
<p>Guild show these files (file names will differ):</p>
<pre><code class="language-output">~/.guild/runs/7d230c98d20811e88f52d017c2ab916f:
  events.out.tfevents.1539779455.local
  weights-0001-13.233.hdf5
  weights-0002-13.080.hdf5
  weights-0003-13.031.hdf5
  weights-0004-12.996.hdf5
  weights-0005-13.007.hdf5
</code></pre>

<p>These are the log file and trained model weights. Guild tracks these
files along with all other run related metadata.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By default <a class="cmd" href="../../docs/commands/ls-cmd">ls</a> shows relative file paths. You can show full
paths by including the <code>-f</code> option. This is useful if you need to
access a particular file on the file system.</p>
</div>
<p>Guild provides a number of commands for viewing runs. Try any of these
commands from the <code>sample-project</code> directory:</p>
<div class="dl">
<div class="row"><div class="dt col col-sm-4 col-lg-3"><code class="lit">guild view</code></div>
<div class="dd col col-sm-8 col-lg-9">Open <a class="term" href="../../docs/visual/guild-view/">Guild View</a>.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><code class="lit">guild tensorboard</code></div>
<div class="dd col col-sm-8 col-lg-9">View TensorFlow event logs in <a class="term" href="../../docs/visual/tensorboard/">TensorBoard</a>.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><code class="lit">guild runs info</code></div>
<div class="dd col col-sm-8 col-lg-9">Show basic run information (try <code class="lit">guild runs info --help</code> for a
  list of options).</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><code class="lit">guild open</code></div>
<div class="dd col col-sm-8 col-lg-9">Open the run directory in your system file browser.</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the commands <code class="lit">guild view</code> and <code class="lit">guild tensorflow</code>, you must
press <code>Ctrl-C</code> in the console to quit the application and return to a
command prompt.</p>
</div>
<h2 id="end-to-end-workflow">End-to-end workflow</h2>
<p>Guild operations automate model related tasks. While <em>train</em> is a
common operation, it&rsquo;s not the only operation a model may support. For
example, prior to training a model, you may need to prepare a dataset
by processing raw data into a format that can be used efficiently for
training. Your model may therefore have a <em>prepare-data</em> operation
that automates that task. Similarly, after training you may need to
evaluate a trained model with test or validation data&mdash;your model may
have an <em>evaluate</em> operation.</p>
<p>By running various operations, you use Guild to automate your
workflow.</p>
<p>Consider the following worflow, which generates TensorFLow Lite files
for deployment to mobile devices:</p>
<p><img class="md" style="width:400px" src="/assets/img/workflow-2.png"></p>
<p>Each step can be automated using an operation:</p>
<ul class="md">
<li>
<p>Before training a model, run <code>prepare-data</code>, which loads raw data
  from a database and processes it using various transformations. You
  can use operation <a class="term" href="../../docs/operations/#flags">flags</a> to specify which
  transformations should apply and how examples should be split
  between train and validate.</p>
<p><code>$ guild run prepare-data transforms=all validation-split=20</code></p>
</li>
<li>
<p>Once the data is prepared, run <code>train</code>. This is a &ldquo;train from
  scratch&rdquo; operation, which means that model weights are initialized
  with their starting values (e.g. randomly generated) without the
  benefit of prior training. This is typically a long-running
  operation that can take several hour or even days. As with
  <code>prepare-data</code> you can use flags to specify training parameters such
  as learning rate.</p>
<p><code>$ guild run train learning-rate=0.001</code></p>
</li>
<li>
<p>As the model trains, run <code>evaluate</code> to check its status. This can be
  a time consuming operation, depending on how thorough the evaluation
  is. Run it alongside the train operation without having to stop
  training.</p>
<p><code>$ guild run evaluate</code></p>
</li>
<li>
<p>Once a model is trained, you can fine-tune it with additional
  training&mdash;but with a lower learning rate. You run <code>finetune</code>, which
  initializes the model weights with the values from a previous
  <code>train</code> operation. As with <code>train</code> you can check progress by running
  <code>evaluate</code> and stop operation when the model accuracy is no longer
  improving.</p>
<p><code>$ guild run finetune learning-rate=0.0001</code></p>
</li>
<li>
<p>When it&rsquo;s time to deploy a trained model for use in a mobile
  application, run the <code>tflite</code> operation to generate a <a class="ext" href="https://www.tensorflow.org/lite/" target="_blank">TF Lite</a> file. The operation uses the
  learned weights from the <code>finetune</code> operation to create a frozen
  inference model and corresponding TF Lite file.</p>
<p><code>$ guild run tflite</code></p>
</li>
</ul>
<p>This is just one example of a model workflow. Your workflow will be
different based on the type of model and the applications you build
with it.</p>
<h3 id="example_3">Example</h3>
<p>If you are following the examples, in this section we add a <code>predict</code>
operation to our Fashion-MNIST model. With the addition of this
operation, our model supports this simple workflow:</p>
<p><img class="md" style="width:220px" src="/assets/img/workflow-3.png"></p>
<p>Modify <code class="lit">guild.yml</code> to be:</p>
<pre><code class="language-yaml">- model: fashion
  description: Basic Fashion-MNIST image classifier.
  operations:
    train:
      description: Train classifier from scratch.
      main: train
    predict:
      description: Use trained model to make predictions.
      main: predict
      requires: trained-model
  resources:
    trained-model:
      path: model
      sources:
        - operation: train
</code></pre>

<p>This adds a new operation <code>predict</code>. It also adds a
<a class="term" href="../../docs/resources/">resource</a> named <code>trained-model</code>, which is required by
<code>predict</code>. Resources are used to resolve source files needed by an
operation. In this example, the <code>predict</code> operation needs files
generated by the <code>train</code> operation.</p>
<p>Here&rsquo;s how it works:</p>
<ul class="md">
<li>
<p><code>predict</code> requires <code>trained-model</code>, which means that all of the
  sources defined for the <code>trained-model</code> resource must be available
  to the <code>predict</code> operation when <code>predict</code> is run.</p>
</li>
<li>
<p>The <code>trained-model</code> resource defines a single <em>source</em>, which is the
  output generated by the <code>train</code> operation.</p>
</li>
<li>
<p>The <code>trained-model</code> resource <em>path</em> is <code class="lit">model</code>, which means that
  each of source files are located in the <code>model</code> run subdirectory of
  requiring operations.</p>
</li>
<li>
<p>When <code>predict</code> runs, it looks for trained model files in a run
  subdirectory named <code>model</code>. It uses these to initialize the model
  variables before making any predictions.</p>
</li>
</ul>
<p>Next, we need to create the <code>predict</code> module. We&rsquo;ll download it along
with a second module <code>fig</code>, which is required by <code>predict</code>.</p>
<p>Download the following two files and save them to <code class="lit">sample-project</code>:</p>
<div class="dl">
<div class="row"><div class="dt col col-sm-4 col-lg-3"><a class="ext" href="https://raw.githubusercontent.com/guildai/examples/master/fashion/predict.py" target="_blank">predict.py</a></div>
<div class="dd col col-sm-8 col-lg-9">The <code>predict</code> module.</div>
</div><div class="row"><div class="dt col col-sm-4 col-lg-3"><a class="ext" href="https://raw.githubusercontent.com/guildai/examples/master/fashion/fig.py" target="_blank">fig.py</a></div>
<div class="dd col col-sm-8 col-lg-9">A module required by <code>predict</code>.</div>
</div></div>
<p>If you are using <code>wget</code> you can download the file directly to the
project directory by running:</p>
<pre><code class="language-command">wget https://raw.githubusercontent.com/guildai/examples/master/fashion/predict.py
wget https://raw.githubusercontent.com/guildai/examples/master/fashion/fig.py
</code></pre>

<p>When the required files are downloaded, your project structure should
be:</p>
<div class="file-tree">
<ul>
<li class="is-folder open">sample-project
 <ul>
 <li class="is-file">fig.py</li>
 <li class="is-file">guild.yml</li>
 <li class="is-file">predict.py</li>
 <li class="is-file">train.py</li>
 </ul>
</li>
</ul>
</div>

<p>Save your changes to <code>guild.yml</code> and confirm that the new operations
are available:</p>
<pre><code class="language-command">guild ops
</code></pre>

<p>Guild now displays two operations:</p>
<pre><code class="language-output">./fashion:predict       Use trained model to make predictions.
./fashion:train         Train classifier from scratch.
</code></pre>

<p>Next, generate predictions by running <code>predict</code>:</p>
<pre><code class="language-command">guild run predict
</code></pre>

<p>Press <code>Enter</code> to confirm.</p>
<p>Guild runs the operation, which selects five images at random from the
Fashion-MNIST test dataset and classifies them using the trained
model. The prediction for each image is plotted in a <code>png</code> file
located in the operation run directory.</p>
<p>To view the generated files from the <code>predict</code> operation, run:</p>
<pre><code class="language-command">guild ls
</code></pre>

<p>Guild shows these files (file names will differ):</p>
<pre><code class="language-output">~/.guild/runs/bae908a4d25111e88f52d017c2ab916f:
  00618.png
  03100.png
  03975.png
  07868-error.png
  09807.png
  model/
  model/events.out.tfevents.1539810834.dakota
  model/weights-0001-0.494.hdf5
  model/weights-0002-0.373.hdf5
  model/weights-0003-0.332.hdf5
  model/weights-0004-0.310.hdf5
  model/weights-0005-0.292.hdf5
</code></pre>

<p>Each <code>png</code> file is an image generated by the <code>predict</code> operation. You
can view the images by running <code>guild view</code>, clicking <strong>Files</strong>, and
then clicking one of the generated image files.</p>
<figure><p><img class="md" style="width:660px"
     src="/assets/img/guild-view-predict.png"></p>
<figcaption>Sample predicted image from Guild View</figcaption>
</figure><p>Press <code>Ctrl-C</code> in the console to quit Guild View and return to a
command prompt.</p>
<p>Alternatively, run <code>guild open</code> to view the run directory in you
system file browser. From there you can open images in the image
viewer of choice.</p>
<p>If the model misclassifies an image, the image name contains the text
<code class="lit">error</code>. Your run may not have errors as the images are randomly
selected&mdash;try running the operation a few more times to see if the
model misclassifies an image.</p>
<p>The files under the <code>models</code> subdirectory (see file list above) are
from the <code>train</code> operation. These are used to initialize the model
weights for use in image class prediction. Guild makes these files
available when it resolves the <code>trained-model</code> resource, which is
required by <code>predict</code>.</p>
<h2 id="model-tests">Model tests</h2>
<p>Guild provides a test facility to verify model behavior. The primary
method of testing is to run operations and to check the contents of
generated files.</p>
<p>For more information, see <a class="term" href="../../docs/tests/">Tests</a>.</p>
<h3 id="example_4">Example</h3>
<p>If you are following the examples, in this section we add a test to
our project that can be run to verify model behavior.</p>
<p>Modify <code class="lit">guild.yml</code> to be:</p>
<pre><code class="language-yaml">- model: fashion
  description: Basic Fashion-MNIST image classifier.
  operations:
    train:
      description: Train classifier from scratch.
      main: train
    predict:
      description: Use trained model to make predictions.
      main: predict
      requires: trained-model
  resources:
    trained-model:
      path: model
      sources:
        - operation: train

- test: fashion
  steps:
    - run: train
    - run: predict
</code></pre>

<p>This change adds a test named <code>fashion</code> to the Guild file, which is
used to check the model&rsquo;s <code>train</code> and <code>predict</code> operations. If the
operations complete successfully the test will pass, otherwise it will
fail.</p>
<p>Save your changes to <code>guild.yml</code>.</p>
<p>Next, run the test:</p>
<pre><code class="language-command">guild test
</code></pre>

<p>Press <code>Enter</code> to confirm.</p>
<p>Guild runs <code>train</code> and <code>predict</code>&mdash;the operations should complete
without error and Guild shows <strong><code>All tests passed</code></strong>.</p>
<h2 id="packages-and-code-reuse">Packages and code reuse</h2>
<p>Guild supports packaging and distribution your models, which allow
others to use your models by simply installing a package. Once
installed, packaged models and their operations are available just
like project models.</p>
<p>Similarly, you can install and use models developed by others.</p>
<p>For more information, see <a class="term" href="../../docs/packages/">Packages</a>.</p>
<h3 id="example_5">Example</h3>
<p>If you&rsquo;re following the examples, in this section, we add package
support to our project and create a package to facilitate using our
model.</p>
<p>First, modify <code>guild.yml</code> to be:</p>
<pre><code class="language-yaml">- model: fashion
  description: Basic Fashion-MNIST image classifier.
  operations:
    train:
      description: Train classifier from scratch.
      main: train
    predict:
      description: Use trained model to make predictions.
      main: predict
      requires: trained-model
  resources:
    trained-model:
      path: model
      sources:
        - operation: train

- test: fashion
  steps:
    - run: train
    - run: predict

- package: fashion
  version: 1.0
</code></pre>

<p>This adds a top-level <code>package</code> element to <code>guild.yml</code> that provides
information Guild uses to generate a package.</p>
<p>Next, create a package by running:</p>
<pre><code class="language-command">guild package
</code></pre>

<p>Guild creates a file <code>dist/fashion-1.0.0-py2.py3-none-any.whl</code>. This
is a Python <a class="ext" href="https://packaging.python.org/tutorials/packaging-projects/#generating-distribution-archives" target="_blank">distribution archive</a>
that is used to install the fashion model.</p>
<p>You can distribute this file to friends and colleagues who want to use
your model. For example, upload the package as a <a class="ext" href="https://help.github.com/articles/creating-releases/" target="_blank">release on GitHub</a>.</p>
<p>To install the package, a user runs <a class="cmd" href="../../docs/commands/install-cmd">guild install</a>,
specifying the path to <code>fashion-1.0.0-py2.py3-none-any.whl</code>.</p>
<p>The steps below are optional&mdash;follow them to experiment with your
packaged model.</p>
<p>To simulate a user&rsquo;s experience when installing and using your
packaged model, create a <a class="ext" href="https://docs.python.org/3/tutorial/venv.html" target="_blank">Python virtual environment</a> that isolates the
package and its requirements. Use a temporary environment directory
(you can delete the directory after you complete the steps below):</p>
<pre><code class="language-command">virtualenv /tmp/sample-package-test
</code></pre>

<p>Next, activate the virtual environment:</p>
<pre><code class="language-command">source /tmp/sample-package-test/bin/activate
</code></pre>

<p>Within the activated virtual environment, install Guild AI,
TensorFlow, and the <code>fashion</code> package:</p>
<pre><code class="language-command">pip install guildai tensorflow dist/fashion-1.0-py2.py3-none-any.whl
</code></pre>

<p>Change to the environment directory:</p>
<pre><code class="language-command">cd /tmp/sample-package-test
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The last step is not required to use the installed <code>fashion</code>
package. However, by changing out of the project directory
(i.e. <code>sample-project</code>) you avoid displaying its Guild file contents
in the commands below.</p>
</div>
<p>With the <code>fashion</code> package installed, list available models:</p>
<pre><code class="language-command">guild models
</code></pre>

<p>Guild shows the available models:</p>
<pre><code class="language-output">fashion/fashion  Basic Fashion-MNIST image classifier.
</code></pre>

<p>The value <code class="lit">fashion/fashion</code> is the full model name including the
model source. In this case the model is defined in the <code class="lit">fashion</code>
package.</p>
<p>Next, show available operations:</p>
<pre><code class="language-command">guild ops
</code></pre>

<p>Guild shows the model operations, again indicating that they are
defined in the <code class="lit">fashion</code> package:</p>
<pre><code class="language-output">fashion/fashion:predict  Use trained model to make predictions.
fashion/fashion:train    Train classifier from scratch.
</code></pre>

<p>Next, test the model&mdash;this runs both the <code>train</code> and <code>predict</code>
operations:</p>
<pre><code class="language-command">guild test fashion
</code></pre>

<p>In this case you must specify the package to test.</p>
<p>Press <code>Enter</code> to continue. Guild runs the two operations assoicated
with test.</p>
<p>When the two operations are completed, you may use the various Guild
run management commands to view the results.</p>
<p>List runs:</p>
<pre><code class="language-command">guild runs
</code></pre>

<p>Use Guild View to explore the run files, including prediction images:</p>
<pre><code class="language-command">guild view
</code></pre>

<p>Press <code>Ctrl-C</code> to quit Guild View and return to a command prompt.</p>
<p>Use TensorBoard to view training logs:</p>
<pre><code class="language-command">guild tensorboard
</code></pre>

<p>Press <code>Ctrl-C</code> to quit TensorBoard and return to a command prompt.</p>
<p>These steps simulate a user&rsquo;s experience when installing and using
your Fashion-MNIST image classifier. Once you package your model, you
need only distribute the package archive
(e.g. <code>fashion-1.0.0-py2.py3-none-any.whl</code>) to users for them to
install and use your model.</p>
<h2 id="summary">Summary</h2>
<p>In this introduction we present Guild AI core functionality with
step-by-step examples for hands-on experience with the toolset.</p>
<p>Guild AI supports TensorFlow and Keras model automation and provides a
comprehensive set of features to improve developer productivity and
facilitate model reuse for application development.</p>
<p>Guild models can be both project based and package based. Project
based models are defined in Guild files (i.e. files named <code>guild.yml</code>)
that reside in a project root directory. Guild files contain model
definitions, including operations and resources used by
operations. Guild files can also contain tests and package
definitions.</p>
<p>Guild packages are used to distribute models to other users. Packages
are standard Python package archives that can be installed with
pip. Package dependencies (e.g. <code>numpy</code>, <code>matplotlib</code>, etc.) are
automatically installed with Guild packages, ensuring that operations
work without additional installation steps.</p>
<p>Guild supports experiment tracking and management. Experiments are
created for each operation runs and can be viewed in various ways
using Guild commands, including visualization tools for exploring runs
and training logs.</p>
<h3 id="next-steps">Next steps</h3>
<ul class="md">
<li><a href="../../docs/">Browse Guild AI documentation</a></li>
</ul>
      
<ul class="pager">
  
  <li class="previous">
    <a href="/docs/">
      <span>Prev</span> <aside>Documentation contents</aside>
    </a>
  </li>
  
  
  <li class="next">
    <a href="/docs/models/">
      <span>Next</span> <aside>Models</aside>
    </a>
  </li>
  
</ul>

    </article>
  </div>
</main>

    
<footer class="site-footer">
  <div class="container">
    <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>
    <div class="row">
      <div class="col-md-6 col-sm-6 footer-cell">
        <div class="copyright">Copyright &copy; 2017-2018 TensorHub, Inc.</div>
        
      </div>
      <div class="col-md-6 col-sm-6 footer-cell">
        <ul class="footer-menu">
          <li><a href="mailto:niceperson@guild.ai">Contact us</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

  </body>
  <script src="../../assets/js/vendor.min.js" data-manual></script>
  <script src="../../assets/js/theDocs.min.js"></script>
</html>