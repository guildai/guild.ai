tags: concepts

# Runs

[TOC]

## Overview

Runs are generated by running [operations](term:operation). A run may
refer to one of two things:

- [Operation system process
  ->](https://en.wikipedia.org/wiki/Process_(computing)) started with
  the [](cmd:run) command
- Output generated by a run operation

When you train a model, you generate a run. That run contains the
trained model as well as training logs and other artifacts associated
with the operation.

Similarly, when you fine-tune a model, you generate a run. When you
test a model, you generate a run. In fact, any operation that you run
generates a distinct run. This is how Guild manages your work.

Here is a common work flow:

- Find and install a model
- Run an operation on that model (e.g. `train`)
- Monitor the progress of the operation (e.g. `view`)
- Run another operation with different hyper-parameters (flags)
- Compare runs
- Delete runs that you're no longer interested in
- Select successful runs for deployment or use in other operations

The work centers on *runs* --- creating, comparing, and selecting.

## Run directory

A *run directory* is a file system directory (or folder) that contains
artifacts associated with a run. Guild creates a unique run directory
for every run. This directory contains a variety of important data:

- Run metadata
- Run sources such as datasets
- Run output such as event logs and saved models

Run directories are located in `GUILD_HOME/runs`. For more information
see [Guild home](/docs/reference/guild-home/).

Run related operations interact with run directories in various ways:

- ``guild run`` creates a new run directory
- ``guild runs info`` prints information read from a run directory
- ``guild runs list`` enumerates run directories
- ``guild runs delete`` deletes run directories

## Limiting runs

Over time you'll generate a large number of runs. This list can become
unwieldy, especially when you're interested in a small subset ---
e.g. runs associated with a particular model you're working with. For
this reason, Guild provides two ways of limiting the runs that apply
to run related commands:

- Limit to runs associated with a model defined in the current
  directory
- Limit to runs that match a filter

### Run scope

The first limit is known as *run scope*. Scope can be either *local*
or *global*. By default, scope is local when the current directory
contains a [model definition](term:model-def), otherwise scope is
global. Local scope limits runs to those associated with models
defined in the current directory. Global scope displays all runs.

Global scope can be applied using the ``--all`` (or ``-a``) option.

Run scope is applied based on the directory that Guild commands are
run in. Consider the following directory structure:

<div class="file-tree">
<ul>
<li class="is-folder open">Home<i>Does not contain a model definition &mdash; global scope applies</i>
<li class="is-folder open">Models
 <ul>
 <li class="is-folder open">mnist <i>Contains a model definition &mdash; local scope applies</i>
  <ul>
  <li class="is-file">MODELS <i>Model definition</i></li>
  </ul>
 </li>
 </ul>
</li>
</ul>
</div>

Commands run the from `/Home` have *global* run scope because `/Home`
doesn't contain a model definition. Commands run from `/Models/mnist`
however have *local* scope because that directory contains a model
definition (`/Models/mnist/MODELS`).

Run scope defaults to *local* when a model definition is exists
because Guild assumes that the user is working on models defined at
that location and is not interested in other runs, at least by
default. This follows the pattern of command line tools such as `git`
that apply operations locally when they find a project, repository,
etc. in the current directoy.

When a command is run in local scope, Guild prints a message to
indicate that results are limited:

    Limiting runs to the current directory (use --all to include all)

### Run filtering

The other limit is *run filtering*. Filters are applied with command
line options that specify run attributes, which may include:

- Operation
- Run status
- Deleted status

Run filtering is applied *after* run scope (see above).

For example, to view runs that are associated with the `train`
operation, use the ``--op`` (or ``-o``) option:

``` command
guild runs --op train
```

If the command is in local scope, Guild will limit runs to those
associated with models in the current directory otherwise it will use
all runs. It will then filter those runs, limiting the result to those
associated with operations containing the string "train".

## Start a run

To start a run, use the [](cmd:run) command. The basic format of a
`run` command looks like this:

```
guild run OPERATION
guild run MODEL:OPERATION
guild run PACKAGE/MODEL:OPERATION
```

You can list available operations using the [](cmd:operations)
command. In general, you can omit information about an operation name
as long as Guild can uniquely identify the operation.

For example, if the output of `operations` looks like this:

``` output
iris/iris-cnn:train
iris/iris-cnn:fine-tune
iris/iris-cnn:test
```

You can start the `train` operation by running:

``` command
guild run train
```

You can always provide the model or package. For example, this form
will also start `train`:

``` command
guild run iris-cnn:train
```

You can also use part of the operation specification, as long as Guild
can uniquely identfy the operation. For example, you can start `train`
by running:

```
guild run cnn:train
```

### Operation aliases

Some operations are so common that Guild provides *alias*
commands. These currently include:

- [](cmd:train)

Aliases are used to start operation using these form:

```
guild ALIAS_CMD
guild ALIAS_CMD MODEL
guild ALIAS_CMD PACKAGE/MODEL
```

For example, the `train` alias is used to run the `train`
operation. In the example above, the following commands can be used to
train the iris model:

```
guild train
guild train iris-cnn
guild train cnn
```

## List runs

To list Guild runs, use the [](cmd:runs) or [runs list](cmd:runs-list) command.

``guild runs`` is shorthand for ``guild runs list``.

## Get run information

## Compare runs

## Label runs

Runs can have *labels*, which provide additional information about the
run. A label can used for filtering in the [runs list](cmd:runs-list)
command.

Use [runs label](cmd:runs-label) to set or clear a label for a run.

Use ``guild runs list LABEL`` to list runs with the specified label.

## Delete runs

To delete a run use ``guild runs

## Recover deleted runs

## Purge deleted runs
